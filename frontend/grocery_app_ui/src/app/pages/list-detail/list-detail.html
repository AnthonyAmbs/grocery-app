<button (click)="goBack()" style="margin-bottom: 12px; padding: 4px 8px;">← Back</button>

<h2>{{ listName }}</h2>

<ul style="list-style: none; padding: 0;">
  <li *ngFor="let item of items; trackBy: trackById" style="display: flex; gap: 8px; align-items: center; margin-bottom: 6px;">

    <button (click)="toggleFound(item)">
      {{ item.found ? '✓' : '○' }}
    </button>

    <ng-container *ngIf="editingItemId === item._id; else displayMode">
      <input [(ngModel)]="editedItemName" placeholder="Item name" style="flex: 2; padding: 4px;" />
      <input [(ngModel)]="editedItemQuantity" placeholder="Quantity" type="number" style="width: 60px; padding: 4px;" />
      <input [(ngModel)]="editedItemCategory" placeholder="Category" style="flex: 1; padding: 4px;" />
      <button (click)="saveEditItem(item)" style="padding: 4px 8px;">Save</button>
      <button (click)="cancelEditItem()" style="padding: 4px 8px;">Cancel</button>
    </ng-container>

    <ng-template #displayMode>
      <span [class.found]="item.found" style="flex: 2;">
        {{ item.name }}
        <span *ngIf="item.quantity">({{ item.quantity }})</span>
        <span *ngIf="item.category"> - {{ item.category }}</span>
      </span>
      <button (click)="startEditingItem(item)" style="padding: 4px 8px;">Edit</button>
      <button (click)="deleteItem(item._id)" style="padding: 4px 8px;">Delete</button>
    </ng-template>

  </li>
</ul>

<button (click)="showNewItemForm = !showNewItemForm" style="margin-top:12px; padding:4px 8px;">
  + Add Item
</button>

<div *ngIf="showNewItemForm" style="margin-top: 8px; display: flex; gap: 8px; align-items: center;">
  <input [(ngModel)]="newItemName" placeholder="New item" style="flex:2; padding:4px;" />
  <input [(ngModel)]="newItemQuantity" placeholder="Quantity" type="number" style="width:60px; padding:4px;" />
  <input [(ngModel)]="newItemCategory" placeholder="Category" style="flex:1; padding:4px;" />
  <button (click)="addItem()" style="padding:4px 8px;">Add</button>
  <button (click)="showNewItemForm = false" style="padding:4px 8px;">Cancel</button>
</div>